!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);const r=0,o=1,l=2,i=3,u=4,c=5;function f(e){return e===r||e>=u?0:1}function s(e,t){let n=1,r=t+1;for(;r<e.length&&f(e[r]);)++n,++r;for(r=t-1;r>=0&&f(e[r]);)++n,--r;return n}function a(e,t,n){if(!e[n])return u;const r=s(e,n),c=s(t,n);if(c===r)return function(e,t,n){if(e.length!==t.length)throw"Illegal state";for(let r=0;r<e.length;++r)if(r!==n&&e[r]!==f(t[r]))return!1;return!0}(e,t,n)?i:l;if(c<r)return o;throw"Illegal state"}function d(e,t){const n=function(e){return Math.floor((e.offsetX+1)/20)}(e);console.log("move "+n),t(n)}function g(e,t,n,c,f){let s=!1;const g=function(e){const t=e.querySelector(".grid"),n=e.querySelector("#field-template").content.cloneNode(!0),r=n.firstElementChild;return t.appendChild(n).firstElementChild,r.classList.add("adjust-second"),r.querySelector(".river")}(e),p=e.querySelector(".river"),y={realField:n,guessedField:new Array(n.length).fill(r),htmlRiver:p,onOpponentMiss:()=>{console.log("player hit")},onOpponentHit:f,isEnemy:!1},m={realField:c,guessedField:new Array(n.length).fill(r),htmlRiver:g,onOpponentMiss:f,onOpponentHit:()=>{console.log("player hit")},isEnemy:!0};let h=null;function v(t){const n=s?y:m,r=function(e,t,n,r,o,l){let i,u=n[e];r[e]=u;const c=a(n,r,e);r[e]=c,i=u?l.querySelector("#ship-template"):l.querySelector("#dot-template2");const f=i.content.cloneNode(!0),s=f.firstElementChild;return u?t?s.classList.add("diagonal-line-enemy"):s.classList.add("diagonal-line"):t&&s.classList.add("enemy"),o.appendChild(f),s.style.left=20*e+"px",s.style.width="20px",{html:s,res:u,verdict:c}}(t,s,n.realField,n.guessedField,n.htmlRiver,e),c=((f=r.verdict)===o?"Ранил":f===l?"Убил":f===u?"Мимо":f===i?"Победа":void 0)+"!";var f;!function(t,n,r){let o=0;const l=e.querySelector(".message");r?l.classList.add("enemy"):l.classList.remove("enemy"),h&&(l.innerHTML="",clearInterval(h)),h=setInterval((function(){l.innerHTML+=t.charAt(o),o++,o>t.length&&(clearInterval(h),h=setTimeout(()=>{l.innerHTML=""},2e3))}),n)}(c,70,s),console.log(c),r.verdict===u?(s=!s,n.onOpponentMiss(r.verdict)):r.verdict===i?s?setTimeout(()=>{alert("Ты проиграл")},700):setTimeout(()=>{alert("Победа")},700):n.onOpponentHit(r.verdict)}return p.addEventListener("click",(function(e){s&&d(e,v)})),g.addEventListener("click",(function(e){s||d(e,v)})),{fireEnemy:function(e){s&&v(e)}}}function p(e){return function(e,t){let n=e+Math.random()*(t-e);return Math.floor(n)}(0,e)}function y(e){let t=function(e){let t=0;for(let n=0;n<e.length;n++)e[n]===r&&++t;return p(t+1)}(e),n=0;for(console.table(t);n<e.length&&(e[n]===r&&--t,0!==t);n++);return console.table(t,n),n}function m(e){const t=[0,1,0,0,0,1,0,1,1,0,1,0,1,1,0,1,1,1],n=new Array(e).fill(r);let i=-1,s=0;function a(e,t){if(i<0)return y(e);if(e[i]=t,t===o){if(s=function(){let e=p(2);return 0===e?-1:e}(),s>0){let t=i+s;for(;t<e.length;){if(!f(e[t])){if(e[t]===r)return t;break}++t}s*=-1}else{let t=i+s;for(;t>=0;){if(!f(e[t])){if(e[t]===r)return t;break}--t}for(s*=-1,t=i+s;t<e.length;){if(!f(e[t])){if(e[t]===r)return t;break}++t}}return console.table("Err1",t,s,i,e),y(e)}if(t===l){let n=i+1;for(;n<e.length;){if(!f(e[n])){e[n]=c;break}e[n]=t,++n}for(n=i-1;n>=0;){if(!f(e[n])){e[n]=c;break}e[n]=t,--n}return y(e)}if(t===u){if(0!==s){if(s*=-1,s>0){let t=i+s;for(;t<e.length;){if(!f(e[t])){if(e[t]===r)return t;break}++t}s*=-1}else{let t=i+s;for(;t>=0;){if(!f(e[t])){if(e[t]===r)return t;break}--t}}return console.table("Err",t,s,i,e),y(e)}return y(e)}return 1}return{getFieldEnemy:function(){return t},guess:function(e){return console.log(e),i=a(n,e),i}}}!function(e){console.log(e);const t=m(e.length),n=g(document,window,e,t.getFieldEnemy(),(function(e){const r=t.guess(e);console.log(r),setTimeout(()=>{n.fireEnemy(r)},500)}))}([1,0,0,0,0,1,0,1,1,0,1,0,1,1,0,1,1,1])}]);