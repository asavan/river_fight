!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./dist/",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);const r=0,i=1,o=2,l=3,s=4,c=5,u="абвгдежзиклмнопрст",d={0:{len:3,count:1},1:{len:2,count:2},2:{len:1,count:3}};function f(e){return e===r||e>=s?0:1}function a(e,t){return m(e,t,()=>{})}function h(e,t,n){if(!e[n])return s;const r=a(e,n),c=a(t,n);if(c===r)return function(e,t,n){if(e.length!==t.length)throw"Illegal state";for(let r=0;r<e.length;++r)if(r!==n&&e[r]!==f(t[r]))return!1;return!0}(e,t,n)?l:o;if(c<r)return i;throw"Illegal state"}function p(e,t,n,i){let o=t+n,l=0;for(;o<e.length&&o>=0;){if(!f(e[o])){e[o]===r&&i(o);break}o+=n,++l}return l}function m(e,t,n){let r=1;return r+=p(e,t,1,n),r+=p(e,t,-1,n),r}function v(e){return Math.floor((e.offsetX+1)/20)}function y(e,t){t(v(e))}function g(e){return document.querySelector(e)}function L(e){const t=g("#field-template").content.cloneNode(!0),n=t.firstElementChild,r=n.querySelector(".frame-text");for(const e of u){const t=document.createElement("span");t.textContent=e,r.appendChild(t)}return e.appendChild(t).firstElementChild,n}function E(){}function b(e,t,n,c,u){let d=!1;const f=function(e){const t=L(e);return t.classList.add("adjust-second"),t.querySelector(".river")}(e.querySelector(".grid")),a=e.querySelector(".river"),p={realField:n,guessedField:new Array(n.length).fill(r),htmlRiver:a,onOpponentMiss:E,onOpponentHit:u,isEnemy:!1},v={realField:c,guessedField:new Array(n.length).fill(r),htmlRiver:f,onOpponentMiss:u,onOpponentHit:E,isEnemy:!0};let b=null;function w(t){const n=d?p:v,r=function(e,t,n,r,i){let o=n[e];r[e]=o;const l=h(n,r,e);let s;r[e]=l,s=g(o?"#ship-template":"#dot-template2");const c=s.content.cloneNode(!0),u=c.firstElementChild;return o?t?u.classList.add("diagonal-line-enemy"):u.classList.add("diagonal-line"):t&&u.classList.add("enemy"),i.appendChild(c),u.style.left=20*e+"px",u.style.width="20px",{html:u,res:o,verdict:l}}(t,d,n.realField,n.guessedField,n.htmlRiver);var c;!function(t,n,r){let i=0;const o=e.querySelector(".message");r?o.classList.add("enemy"):o.classList.remove("enemy"),b&&(o.innerHTML="",clearInterval(b)),b=setInterval((function(){o.innerHTML+=t.charAt(i),i++,i>t.length&&(clearInterval(b),b=setTimeout(()=>{o.innerHTML=""},2e3))}),n)}(((c=r.verdict)===i?"Ранил":c===o?"Убил":c===s?"Мимо":c===l?"Победа":void 0)+"!",70,d),r.verdict===s?(d=!d,n.onOpponentMiss(r.verdict)):r.verdict===l?d?setTimeout(()=>{alert("Ты проиграл")},700):setTimeout(()=>{alert("Победа")},700):(n.onOpponentHit(r.verdict),r.verdict===o&&m(n.guessedField,t,e=>{!function(e,t,n){const r=g("#dot-template").content.cloneNode(!0),i=r.firstElementChild;n&&i.classList.add("enemy"),t.appendChild(r),i.style.left=20*e+"px",i.style.width="20px"}(e,n.htmlRiver,d)}))}return a.addEventListener("click",(function(e){d&&y(e,w)})),f.addEventListener("click",(function(e){d||y(e,w)})),{fireEnemy:function(e){d&&w(e)}}}function w(e){return function(e,t){let n=e+Math.random()*(t-e);return Math.floor(n)}(0,e)}function O(e){let t=function(e){let t=0;for(let n=0;n<e.length;n++)e[n]===r&&++t;return w(t)}(e),n=0;for(;n<e.length&&(e[n]===r&&--t,!(t<0));n++);return(n>=e.length||n<0)&&console.table("Error out",n,e),n}function j(e){const t=[[0,1,0,0,0,1,0,1,1,0,1,0,1,1,0,1,1,1],[0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,1,1,0],[0,0,0,1,0,1,0,1,0,1,1,1,0,1,1,0,1,1],[1,0,1,0,0,0,1,0,0,1,1,0,1,1,1,0,1,1],[1,0,1,0,0,0,1,1,1,0,1,1,0,1,1,0,0,1],[1,1,1,0,1,1,0,1,1,0,1,0,1,0,0,0,0,1]];return e<0&&(e=w(t.length)),t[e]}function x(e,t){const n=j(t),l=new Array(e).fill(r);let u=-1,d=0;function f(e,t){if(u<0)return O(e);if(e[u]=t,t===i){d=function(){let e=w(2);return 0===e?-1:e}();let n=-1;return p(e,u,d,e=>{n=e}),n>=0?n:(d*=-1,p(e,u,d,e=>{n=e}),n>=0?n:(console.table("Err1",t,d,u,e),O(e)))}if(t===o)return m(e,u,t=>{e[t]=c}),d=0,O(e);if(t===s){if(0!==d){d*=-1;let n=-1;return p(e,u,d,e=>{n=e}),n>=0?n:(console.table("Err",t,d,u,e),O(e))}return O(e)}return 1}return{getFieldEnemy:function(){return n},guess:function(e){return u=f(l,e),u}}}function M(e){const t=x(e.length,-1),n=b(document,window,e,t.getFieldEnemy(),(function(e){const r=t.guess(e);setTimeout(()=>{n.fireEnemy(r)},700)}))}!function(e,t,n){let r=null,i=0;const o=new Array(u.length).fill(0),l=[],s=e.querySelector(".grid"),c=L(s);c.classList.add("adjust-first");const f=function(e,t){const n=e.createElement("div");return n.classList.add("shipyard"),t.appendChild(n),n}(e,s);function a(t){l.push(function(t){const n=e.createElement("div");return n.classList.add("ship"),n.style.width=20*t+"px",f.appendChild(n),{length:t,html:n}}(t)),++i}for(let[e,t]of Object.entries(d))for(let e=0;e<t.count;e++)a(t.len);function h(e,t){r={s:e,n:t};for(const e of l)e.html.classList.remove("choosen");e.html.classList.add("choosen")}for(const e of l)e.html.addEventListener("click",t=>{const n=v(t);h(e,n)});const p=c.querySelector(".river");function m(t){const l=t-r.n;if(!function(e,t,n){if(!function(e,t,n){if(t<0)return!1;const r=t-1;if(r>=0&&e[r]>0)return!1;for(let r=0;r<n;r++){const n=t+r;if(n>e.length-1)return!1;if(e[n]>0)return!1}const i=t+n;return!(i<e.length&&e[i]>0)}(e,t,n))return!1;for(let r=0;r<n;r++)e[t+r]=1;return--i,!0}(o,l,r.s.length))return;const s=e.createElement("div");s.classList.add("ship_river"),s.classList.add("diagonal-line"),s.style.width=r.s.html.style.width,s.style.left=20*l+"px",p.appendChild(s),r.s.html.classList.add("disabled"),r=null,0===i&&(c.classList.remove("adjust-first"),c.classList.add("adjust-third"),p.removeEventListener("click",g),n(o))}function g(e){null!=r&&y(e,m)}p.addEventListener("click",g)}(document,window,M),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js",{scope:"./"})}]);